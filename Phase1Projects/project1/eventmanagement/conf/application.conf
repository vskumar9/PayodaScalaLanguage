# ================================================================
# Server Configuration
# ================================================================
# Bind the Play HTTP server to all network interfaces
play.server.http.address = "0.0.0.0"

# Application will run on port 9001
play.server.http.port = 9001

# Security filter chain (JWT Auth Filter included)
play.http.filters = "security.Filters"

# Enable custom DI module (schedulers, Kafka producer, etc.)
play.modules.enabled += "modules.Module"


# ================================================================
# Notification Settings
# ================================================================
notifications {
  # If true, notifications are pushed to Kafka.
  # If false, notifications are processed internally (logging mode).
  useKafka = false

  # Maximum number of retry attempts before marking a notification as failed
  maxAttempts = 3
}

# Scheduler for Task Notification Engine
task.scheduler {
  # Delay before first scheduler run
  initialDelay = 15s

  # Interval between scheduler cycles
  interval = 5m
}


# ================================================================
# CORS Configuration
# ================================================================
# Enable Play CORS filter
play.filters.enabled += "play.filters.cors.CORSFilter"

play.filters.cors {
  # CORS applies to all /api routes
  pathPrefixes = ["/api"]

  # Allow all origins (use cautiously for production)
  allowedOrigins = ["*"]

  # Allowed HTTP methods
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]

  # Allowed headers sent by the client
  allowedHttpHeaders = ["Accept", "Origin", "Content-Type", "Authorization", "X-Auth-Token"]

  # Cache preflight OPTIONS response for 3 days
  preflightMaxAge = 3 days
}


# ================================================================
# Database (MySQL + Slick) Configuration
# ================================================================
slick.dbs.default.profile = "slick.jdbc.MySQLProfile$"
slick.dbs.default.db.driver = "com.mysql.cj.jdbc.Driver"

# MySQL connection URL
slick.dbs.default.db.url = "jdbc:mysql://**********************:3306/kumar"

# Database credentials (ensure rotation & use environment variables in production)
slick.dbs.default.db.user = "**************"
slick.dbs.default.db.password = "*****************"

# Automatically run database evolutions without prompts
play.evolutions.db.default.autoApply = true


# ================================================================
# JWT Configuration
# ================================================================
jwt {
  # Secret key used to sign JWT tokens (must be private)
  secret = "event-management"

  # Issuer used when generating and validating tokens
  issuer = "event-management"

  # Token expiry time (24 hours)
  expiration = 86400   # 1 day
}


# ================================================================
# Play Application Secret (Important for Production)
# ================================================================
# Used for signing session cookies, CSRF tokens, and other internal crypto.
# Must be long, random, and kept secret.
play.http.secret.key = "b0f4f35a4f9c4e8a9e8d1c7f3a8b2c5d7f9e1a3c4b6d8f0e2a4c6e8f0a2b4c"


# ================================================================
# Kafka Configuration
# ================================================================
kafka {
  # Kafka broker location
  bootstrap.servers = "localhost:9092"

  topics {
    # Topic for event-management notifications
    eventManagement = "eventManagement"
  }

  # Producer-specific configurations
  producer {
    # Acknowledgment mode ("all" ensures strongest durability)
    acks = "all"

    # Retry attempts if Kafka fails to accept message
    retries = 3

    # Delay batch sending to improve performance
    linger.ms = 5
  }
}
