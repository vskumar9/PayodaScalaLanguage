# ================================================================
#                 SERVER CONFIGURATION
# ================================================================
# Bind Play server to all network interfaces (required for Docker/Azure).
play.server.http.address = "0.0.0.0"

# Default application port.
play.server.http.port = 9000

# Register HTTP security filters (JWT authentication).
play.http.filters = "security.Filters"

# Enable custom DI module (runs OverdueScheduler eagerly).
play.modules.enabled += "modules.Module"

# Overdue Scheduler timings
# initialDelay → wait time before first execution
# interval     → how often the scheduler runs (e.g., every 24 hours)
overdue.scheduler.initialDelay = 30s
overdue.scheduler.interval = 24h


# ================================================================
#                 CORS CONFIGURATION
# ================================================================
# Enable Play's built-in CORS filter.
play.filters.enabled += "play.filters.cors.CORSFilter"

play.filters.cors {
  # Apply CORS only to API routes.
  pathPrefixes = ["/api"]

  # Allow requests from any domain.
  allowedOrigins = ["*"]

  # Allowed HTTP methods.
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]

  # Allowed headers for browser requests.
  allowedHttpHeaders = ["Accept", "Origin", "Content-Type", "Authorization", "X-Auth-Token"]

  # Cache preflight OPTIONS request for 3 days.
  preflightMaxAge = 3 days
}


# ================================================================
#            DATABASE CONFIGURATION (Slick + MySQL)
# ================================================================
# Slick database profile (MySQL).
slick.dbs.default.profile="slick.jdbc.MySQLProfile$"

# JDBC driver.
slick.dbs.default.db.driver="com.mysql.cj.jdbc.Driver"

# Remote Azure MySQL connection string.
slick.dbs.default.db.url="jdbc:mysql://*********************:3306/kumar"

# Database credentials.
slick.dbs.default.db.user="********"
slick.dbs.default.db.password="*******"

# Automatically apply SQL evolutions on startup.
play.evolutions.db.default.autoApply=true


# ================================================================
#                       JWT CONFIGURATION
# ================================================================
jwt {
  # Secret key for signing JWT tokens (must be strong in production).
  secret = "equipment-allocation"

  # Token issuer field.
  issuer = "equipment-allocation"

  # Token expiration time (in seconds). 86400 = 24 hours.
  expiration = 86400
}


# ================================================================
#           PLAY APPLICATION SECRET (IMPORTANT!)
# ================================================================
# This key is used internally by Play for:
#   - Session signing
#   - CSRF token generation
#   - Secure cookie operations
# Must be unique and kept secret in a real production environment.
play.http.secret.key = "b0f4f35a4f9c4e8a9e8d1c7f3a8b2c5d7f9e1a3c4b6d8f0e2a4c6e8f0a2b4c"


# ================================================================
#                       KAFKA CONFIGURATION
# ================================================================
kafka {

  # Kafka broker URL (use docker-compose or external broker).
  bootstrap.servers = "localhost:9092"

  topics {
    # Topic used for publishing equipment & inventory events.
    equipment = "equipment-events"
  }

  producer {
    # ACK strategy (all = safest delivery).
    acks = "all"

    # Retry attempts for failed sends.
    retries = 3

    # Delay before batching small messages (improves throughput).
    linger.ms = 5
  }
}
